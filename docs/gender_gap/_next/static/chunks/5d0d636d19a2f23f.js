(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34251,e=>{"use strict";var t=e.i(36807);e.s(["Button",()=>t.default])},13607,e=>{"use strict";e.i(47167);var t=e.i(71645),r=e.i(7670),n=e.i(19130),a=e.i(40799),i=e.i(94425),o=e.i(67719),l=e.i(40672),s=e.i(19727);function u(e){return(0,s.default)("MuiCard",e)}(0,l.default)("MuiCard",["root"]);var d=e.i(43476);let c=(0,a.styled)(o.default,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),p=t.forwardRef(function(e,t){let a=(0,i.useDefaultProps)({props:e,name:"MuiCard"}),{className:o,raised:l=!1,...s}=a,p={...a,raised:l},f=(e=>{let{classes:t}=e;return(0,n.default)({root:["root"]},u,t)})(p);return(0,d.jsx)(c,{className:(0,r.default)(f.root,o),elevation:l?8:void 0,ref:t,ownerState:p,...s})});e.s(["Card",0,p],13607)},69120,e=>{"use strict";var t=e.i(43090);e.s(["IconButton",()=>t.default])},83012,e=>{"use strict";var t=e.i(54624),r=e.i(43476);let n=(0,t.default)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");e.s(["default",0,n])},21308,e=>{"use strict";var t=e.i(54624),r=e.i(43476);let n=(0,t.default)((0,r.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutline");e.s(["default",0,n])},68238,e=>{"use strict";e.i(47167);var t=e.i(71645),r=e.i(7670),n=e.i(19130),a=e.i(40799),i=e.i(94425),o=e.i(40672),l=e.i(19727);function s(e){return(0,l.default)("MuiCardContent",e)}(0,o.default)("MuiCardContent",["root"]);var u=e.i(43476);let d=(0,a.styled)("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),c=t.forwardRef(function(e,t){let a=(0,i.useDefaultProps)({props:e,name:"MuiCardContent"}),{className:o,component:l="div",...c}=a,p={...a,component:l},f=(e=>{let{classes:t}=e;return(0,n.default)({root:["root"]},s,t)})(p);return(0,u.jsx)(d,{as:l,className:(0,r.default)(f.root,o),ownerState:p,ref:t,...c})});e.s(["CardContent",0,c],68238)},3566,71364,e=>{"use strict";e.i(47167);var t=e.i(71645),r=e.i(7670),n=e.i(19130),a=e.i(57242),i=e.i(42196),o=e.i(18005),l=e.i(44202),s=e.i(67719),u=e.i(40672),d=e.i(19727);function c(e){return(0,d.default)("MuiDialog",e)}let p=(0,u.default)("MuiDialog",["root","backdrop","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),f=t.createContext({});e.s(["default",0,f],71364);var m=e.i(9e4),h=e.i(40799),x=e.i(10557),y=e.i(75149),g=e.i(94425),v=e.i(48106),b=e.i(43476);let j=(0,h.styled)(m.default,{name:"MuiDialog",slot:"Backdrop"})({zIndex:-1}),C=(0,h.styled)(o.default,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),_=(0,h.styled)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.container,t[`scroll${(0,i.default)(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),M=(0,h.styled)(s.default,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.paper,t[`scrollPaper${(0,i.default)(r.scroll)}`],t[`paperWidth${(0,i.default)(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})((0,y.default)(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${p.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(e=>"xs"!==e).map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${p.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${p.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),w=t.forwardRef(function(e,o){let u=(0,g.useDefaultProps)({props:e,name:"MuiDialog"}),d=(0,x.useTheme)(),p={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{"aria-describedby":m,"aria-labelledby":h,"aria-modal":y=!0,BackdropComponent:w,BackdropProps:I,children:S,className:k,disableEscapeKeyDown:D=!1,fullScreen:T=!1,fullWidth:P=!1,maxWidth:A="sm",onClick:F,onClose:E,open:O,PaperComponent:L=s.default,PaperProps:R={},scroll:W="paper",slots:N={},slotProps:B={},TransitionComponent:$=l.default,transitionDuration:z=p,TransitionProps:G,...Y}=u,V={...u,disableEscapeKeyDown:D,fullScreen:T,fullWidth:P,maxWidth:A,scroll:W},q=(e=>{let{classes:t,scroll:r,maxWidth:a,fullWidth:o,fullScreen:l}=e,s={root:["root"],backdrop:["backdrop"],container:["container",`scroll${(0,i.default)(r)}`],paper:["paper",`paperScroll${(0,i.default)(r)}`,`paperWidth${(0,i.default)(String(a))}`,o&&"paperFullWidth",l&&"paperFullScreen"]};return(0,n.default)(s,c,t)})(V),H=t.useRef(),X=(0,a.default)(h),U=t.useMemo(()=>({titleId:X}),[X]),K={slots:{transition:$,...N},slotProps:{transition:G,paper:R,backdrop:I,...B}},[Q,J]=(0,v.default)("root",{elementType:C,shouldForwardComponentProp:!0,externalForwardedProps:K,ownerState:V,className:(0,r.default)(q.root,k),ref:o}),[Z,ee]=(0,v.default)("backdrop",{elementType:j,shouldForwardComponentProp:!0,externalForwardedProps:K,ownerState:V,className:q.backdrop}),[et,er]=(0,v.default)("paper",{elementType:M,shouldForwardComponentProp:!0,externalForwardedProps:K,ownerState:V,className:(0,r.default)(q.paper,R.className)}),[en,ea]=(0,v.default)("container",{elementType:_,externalForwardedProps:K,ownerState:V,className:q.container}),[ei,eo]=(0,v.default)("transition",{elementType:l.default,externalForwardedProps:K,ownerState:V,additionalProps:{appear:!0,in:O,timeout:z,role:"presentation"}});return(0,b.jsx)(Q,{closeAfterTransition:!0,slots:{backdrop:Z},slotProps:{backdrop:{transitionDuration:z,as:w,...ee}},disableEscapeKeyDown:D,onClose:E,open:O,onClick:e=>{F&&F(e),H.current&&(H.current=null,E&&E(e,"backdropClick"))},...J,...Y,children:(0,b.jsx)(ei,{...eo,children:(0,b.jsx)(en,{onMouseDown:e=>{H.current=e.target===e.currentTarget},...ea,children:(0,b.jsx)(et,{as:L,elevation:24,role:"dialog","aria-describedby":m,"aria-labelledby":X,"aria-modal":y,...er,children:(0,b.jsx)(f.Provider,{value:U,children:S})})})})})});e.s(["Dialog",0,w],3566)},33329,59991,e=>{"use strict";e.i(47167);var t=e.i(71645),r=e.i(7670),n=e.i(19130),a=e.i(40799),i=e.i(75149),o=e.i(94425),l=e.i(40672),s=e.i(19727);function u(e){return(0,s.default)("MuiDialogContent",e)}function d(e){return(0,s.default)("MuiDialogTitle",e)}(0,l.default)("MuiDialogContent",["root","dividers"]);let c=(0,l.default)("MuiDialogTitle",["root"]);var p=e.i(43476);let f=(0,a.styled)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})((0,i.default)(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${c.root} + &`]:{paddingTop:0}}}]}))),m=t.forwardRef(function(e,t){let a=(0,o.useDefaultProps)({props:e,name:"MuiDialogContent"}),{className:i,dividers:l=!1,...s}=a,d={...a,dividers:l},c=(e=>{let{classes:t,dividers:r}=e;return(0,n.default)({root:["root",r&&"dividers"]},u,t)})(d);return(0,p.jsx)(f,{className:(0,r.default)(c.root,i),ownerState:d,ref:t,...s})});e.s(["DialogContent",0,m],33329);var h=e.i(26863),x=e.i(71364);let y=(0,a.styled)(h.default,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),g=t.forwardRef(function(e,a){let i=(0,o.useDefaultProps)({props:e,name:"MuiDialogTitle"}),{className:l,id:s,...u}=i,c=(e=>{let{classes:t}=e;return(0,n.default)({root:["root"]},d,t)})(i),{titleId:f=s}=t.useContext(x.default);return(0,p.jsx)(y,{component:"h2",className:(0,r.default)(c.root,l),ownerState:i,ref:a,variant:"h6",id:s??f,...u})});e.s(["DialogTitle",0,g],59991)},37934,e=>{"use strict";var t=e.i(43476),r=e.i(83012),n=e.i(21308),a=e.i(13607),i=e.i(68238),o=e.i(3566),l=e.i(33329),s=e.i(59991),u=e.i(69120),d=e.i(81200),c=e.i(63745);e.i(47167);var p=e.i(71645),f=e.i(7670),m=e.i(19130),h=e.i(13892),x=e.i(40799),y=e.i(75149),g=e.i(94425),v=e.i(40672),b=e.i(19727);function j(e){return(0,b.default)("MuiTable",e)}(0,v.default)("MuiTable",["root","stickyHeader"]);let C=(0,x.styled)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.stickyHeader&&t.stickyHeader]}})((0,y.default)(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]}))),_="table",M=p.forwardRef(function(e,r){let n=(0,g.useDefaultProps)({props:e,name:"MuiTable"}),{className:a,component:i=_,padding:o="normal",size:l="medium",stickyHeader:s=!1,...u}=n,d={...n,component:i,padding:o,size:l,stickyHeader:s},c=(e=>{let{classes:t,stickyHeader:r}=e;return(0,m.default)({root:["root",r&&"stickyHeader"]},j,t)})(d),x=p.useMemo(()=>({padding:o,size:l,stickyHeader:s}),[o,l,s]);return(0,t.jsx)(h.default.Provider,{value:x,children:(0,t.jsx)(C,{as:i,role:i===_?null:"table",ref:r,className:(0,f.default)(c.root,a),ownerState:d,...u})})});var w=e.i(4052);function I(e){return(0,b.default)("MuiTableBody",e)}(0,v.default)("MuiTableBody",["root"]);let S=(0,x.styled)("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),k={variant:"body"},D="tbody",T=p.forwardRef(function(e,r){let n=(0,g.useDefaultProps)({props:e,name:"MuiTableBody"}),{className:a,component:i=D,...o}=n,l={...n,component:i},s=(e=>{let{classes:t}=e;return(0,m.default)({root:["root"]},I,t)})(l);return(0,t.jsx)(w.default.Provider,{value:k,children:(0,t.jsx)(S,{className:(0,f.default)(s.root,a),as:i,ref:r,role:i===D?null:"rowgroup",ownerState:l,...o})})});var P=e.i(3737),P=P;function A(e){return(0,b.default)("MuiTableRow",e)}let F=(0,v.default)("MuiTableRow",["root","selected","hover","head","footer"]),E=(0,x.styled)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.head&&t.head,r.footer&&t.footer]}})((0,y.default)(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${F.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${F.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`)}}}))),O=p.forwardRef(function(e,r){let n=(0,g.useDefaultProps)({props:e,name:"MuiTableRow"}),{className:a,component:i="tr",hover:o=!1,selected:l=!1,...s}=n,u=p.useContext(w.default),d={...n,component:i,hover:o,selected:l,head:u&&"head"===u.variant,footer:u&&"footer"===u.variant},c=(e=>{let{classes:t,selected:r,hover:n,head:a,footer:i}=e;return(0,m.default)({root:["root",r&&"selected",n&&"hover",a&&"head",i&&"footer"]},A,t)})(d);return(0,t.jsx)(E,{as:i,ref:r,className:(0,f.default)(c.root,a),role:"tr"===i?null:"row",ownerState:d,...s})});var L=e.i(66796),R=e.i(63250),W=e.i(41143);function N({variable:e,view:r,filter:n}){let o=W.variableInfo[e.base];return(0,t.jsx)(a.Card,{children:(0,t.jsxs)(i.CardContent,{children:[(0,t.jsx)(L.Typography,{variant:"h6",gutterBottom:!0,children:e.name}),(0,t.jsx)(M,{sx:{"& .MuiTypography-root":{fontSize:".95em"},"& td":{alignContent:"start"}},size:"small",children:(0,t.jsxs)(T,{children:[(0,t.jsxs)(O,{children:[(0,t.jsx)(P.default,{children:(0,t.jsx)(L.Typography,{children:"Basis:"})}),(0,t.jsx)(P.default,{children:(0,t.jsx)(L.Typography,{children:o.fullName})})]}),(0,t.jsxs)(O,{children:[(0,t.jsx)(P.default,{children:(0,t.jsx)(L.Typography,{children:"Description:"})}),(0,t.jsx)(P.default,{children:(0,t.jsx)(L.Typography,{children:e.description})})]}),o.source?(0,t.jsxs)(O,{children:[(0,t.jsx)(P.default,{children:(0,t.jsx)(L.Typography,{children:"Source:"})}),(0,t.jsx)(P.default,{children:(0,t.jsx)(L.Typography,{children:(0,t.jsx)(d.Link,{href:o.source_url,rel:"noreferrer",target:"_blank",children:o.source})})})]}):e.percent?(0,t.jsxs)(O,{children:[(0,t.jsx)(P.default,{children:(0,t.jsx)(L.Typography,{whiteSpace:"nowrap",children:"Percent Total:"})}),(0,t.jsx)(P.default,{children:(0,t.jsx)(L.Typography,{children:(r.within_split&&e.subset.variable?"Within split":"Across splits")+(e.summary?", "+(e.summary.overall?"all participants":`within ${"sex"===e.summary.variable?"gender":e.summary.variable} level`):"")+", including these activities: "+n.sectors.join(", ")})})]}):(0,t.jsx)(t.Fragment,{})]})})]})})}function B(){let e=(0,p.useContext)(R.ViewContext),a=(0,p.useContext)(R.FilterContext),[i,d]=(0,p.useState)(!1),f=()=>d(!i);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.IconButton,{color:"inherit",onClick:f,"aria-label":"more information about the current variables",children:(0,t.jsx)(n.default,{})}),i&&(0,t.jsxs)(o.Dialog,{open:i,onClose:f,hideBackdrop:!0,children:[(0,t.jsx)(s.DialogTitle,{children:"Variable Details"}),(0,t.jsx)(u.IconButton,{"aria-label":"close variable details",onClick:f,sx:{position:"absolute",right:8,top:12},children:(0,t.jsx)(r.default,{})}),(0,t.jsx)(l.DialogContent,{sx:{width:500,maxWidth:"100%",p:0},children:(0,t.jsxs)(c.Stack,{children:[(0,t.jsx)(N,{variable:e.y,view:e,filter:a}),e.as_plot&&(0,t.jsx)(N,{variable:e.x,view:e,filter:a})]})})]})]})}e.s(["InfoDisplay",()=>B],37934)},35948,67786,82472,e=>{"use strict";var t=e.i(54624),r=e.i(43476);let n=(0,t.default)((0,r.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download");e.s(["default",0,n],35948);var a=e.i(90498);e.s(["Autocomplete",()=>a.default],67786);var i=e.i(39855);e.s(["Checkbox",()=>i.default],82472)},56846,e=>{"use strict";e.i(47167);var t=e.i(71645),r=e.i(7670),n=e.i(19130),a=e.i(40799),i=e.i(94425),o=e.i(40672),l=e.i(19727);function s(e){return(0,l.default)("MuiDialogActions",e)}(0,o.default)("MuiDialogActions",["root","spacing"]);var u=e.i(43476);let d=(0,a.styled)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),c=t.forwardRef(function(e,t){let a=(0,i.useDefaultProps)({props:e,name:"MuiDialogActions"}),{className:o,disableSpacing:l=!1,...c}=a,p={...a,disableSpacing:l},f=(e=>{let{classes:t,disableSpacing:r}=e;return(0,n.default)({root:["root",!r&&"spacing"]},s,t)})(p);return(0,u.jsx)(d,{className:(0,r.default)(f.root,o),ownerState:p,ref:t,...c})});e.s(["DialogActions",0,c],56846)},25376,e=>{"use strict";var t=e.i(53332);e.s(["FormControlLabel",()=>t.default])},11458,e=>{"use strict";var t=e.i(28642);e.s(["MenuItem",()=>t.default])},33460,e=>{"use strict";var t=e.i(60291);e.s(["Switch",()=>t.default])},69437,e=>{"use strict";var t=e.i(36151);e.s(["TextField",()=>t.default])},76157,e=>{"use strict";var t=e.i(43476),r=e.i(83012),n=e.i(35948),a=e.i(67786),i=e.i(34251),o=e.i(82472),l=e.i(3566),s=e.i(56846),u=e.i(33329),d=e.i(59991),c=e.i(25376),p=e.i(69120),f=e.i(81200),m=e.i(11458),h=e.i(63745),x=e.i(33460),y=e.i(69437),g=e.i(66796);e.i(31840);var v=e.i(39388),b=e.i(71645),j=e.i(32109),C=e.i(63250);function _(e,t,r){return`wid_ggg_${r}${"all"===t.time_agg?"":"_"+("specified"===t.time_agg?t.select_year:t.time_agg+"-time")}_${e.get("variable",0)}_${e.numRows()}`}function M(){let e=(0,b.useContext)(j.DataContext),M=(0,b.useContext)(C.ViewContext),w=(0,b.useContext)(C.FilteredContext),I=(0,b.useMemo)(()=>(0,v.from)(Object.values(e.countryInfo)).select("ISO_A3","name","region","income").rename({ISO_A3:"country",name:"country_name"}),[e.countryInfo]),[S,k]=(0,b.useState)(!1),[D,T]=(0,b.useState)(!1),[P,A]=(0,b.useState)(!0),F=(0,b.useMemo)(()=>{let t=D?e.data:w;return P&&(t=t.join(I)),t},[D,P,e.data,w]),E=(0,b.useMemo)(()=>F.columnNames(),[F]),[O,L]=(0,b.useState)(E),[R,W]=(0,b.useState)(""),N=(0,b.useMemo)(()=>{let t=_(w,M,e.meta.updated);return W(t),L(E.filter(e=>"mean"!==M.time_agg||"year"!==e)),{partial:t,full:`wid_ggg_${e.meta.updated}${"all"===M.time_agg?"":"_"+("specified"===M.time_agg?M.select_year:M.time_agg+"-time")}`}},[w,M,E,e.meta.updated]),B=()=>k(!S);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{color:"inherit",onClick:B,startIcon:(0,t.jsx)(n.default,{}),children:"Export"}),S&&(0,t.jsxs)(l.Dialog,{open:S,onClose:B,hideBackdrop:!0,children:[(0,t.jsx)(d.DialogTitle,{children:"Data Export"}),(0,t.jsx)(p.IconButton,{"aria-label":"close export menu",onClick:B,sx:{position:"absolute",right:8,top:12},children:(0,t.jsx)(r.default,{})}),(0,t.jsxs)(u.DialogContent,{sx:{width:500,maxWidth:"100%",pt:0},children:[(0,t.jsxs)(g.Typography,{children:["Direct link to full dataset:"," ",(0,t.jsx)(f.Link,{href:"https://dissc-yale.github.io/WorkInData/gender_gap/data.csv.gz",rel:"noreferrer",target:"_blank",children:"data.csv.gz"})]}),(0,t.jsx)(g.Typography,{sx:{pt:1,pb:1},children:"Custom Export"}),(0,t.jsxs)(h.Stack,{spacing:1,children:[(0,t.jsx)(y.TextField,{fullWidth:!0,size:"small",label:"Filename",value:R,onChange:e=>W(e.target.value),children:R}),(0,t.jsx)(a.Autocomplete,{options:E,sx:{"& li":{p:0}},renderOption:(e,r,{selected:n})=>{let{key:a,...i}=e;return(0,t.jsxs)(m.MenuItem,{disabled:"mean"===M.time_agg&&"year"===r,...i,children:[(0,t.jsx)(o.Checkbox,{checked:n}),r]},a)},renderInput:e=>(0,t.jsx)(y.TextField,{...e,label:"Columns"}),value:O,renderValue:()=>(0,t.jsxs)(g.Typography,{sx:{p:1,pt:0,pb:0},children:["Selected: ",O.length]}),multiple:!0,disableCloseOnSelect:!0,fullWidth:!0,size:"small",onChange:(e,t)=>L(t)}),(0,t.jsx)(c.FormControlLabel,{sx:{float:"right"},label:"Include Country Info",labelPlacement:"start",control:(0,t.jsx)(x.Switch,{checked:P,onChange:()=>A(!P)})}),(0,t.jsx)(c.FormControlLabel,{sx:{float:"right"},label:"Full Dataset",labelPlacement:"start",control:(0,t.jsx)(x.Switch,{checked:D,onChange:()=>{R===N[D?"full":"partial"]&&(N.partial=_(w,M,e.meta.updated),W(N[D?"partial":"full"])),T(!D)}})})]})]}),(0,t.jsxs)(s.DialogActions,{sx:{justifyContent:"right"},children:[(0,t.jsxs)(g.Typography,{children:["CSV file with ",F.numRows()," rows"]}),(0,t.jsx)(i.Button,{variant:"contained",onClick:()=>{let e=document.createElement("a");document.body.appendChild(e),e.rel="noreferrer",e.target="_blank",e.download=R+".csv",e.href=URL.createObjectURL(new Blob([F.toCSV({columns:O})],{type:"text/csv; charset=utf-8"})),setTimeout(function(){e.dispatchEvent(new MouseEvent("click")),URL.revokeObjectURL.bind(null,e.href),document.body.removeChild(e)},0)},children:"Download"})]})]})]})}e.s(["Export",()=>M])},49017,74778,73405,e=>{"use strict";var t=e.i(28637);e.s(["FormControl",()=>t.default],49017);var r=e.i(39147);e.s(["InputLabel",()=>r.default],74778);var n=e.i(29041);e.s(["ListSubheader",()=>n.default],73405)},58932,83124,42669,15904,42930,e=>{"use strict";var t=e.i(43476),r=e.i(49017),n=e.i(74778),a=e.i(73405),i=e.i(11458),o=e.i(26678);e.s(["Select",()=>o.default],83124);var o=o,l=e.i(66796),s=e.i(71645),u=e.i(41143),d=e.i(76246),c=e.i(63250),p=e.i(32109),o=o,f=e.i(69799);e.s(["Tooltip",()=>f.default],42669);var f=f;function m({current:e,viewAction:a,outlined:s}){return(0,t.jsx)(f.default,{title:"Determines how colors are selected for each country.",placement:"top",children:(0,t.jsxs)(r.FormControl,{variant:s?"outlined":"filled",fullWidth:!0,size:"small",children:[(0,t.jsx)(n.InputLabel,{id:"color_basis_select",children:"Color Basis"}),(0,t.jsxs)(o.default,{labelId:"color_basis_select",label:"Color Basis",value:e,onChange:e=>{a({key:"color_source",value:e.target.value})},children:[(0,t.jsx)(i.MenuItem,{value:"gdp",children:(0,t.jsx)(l.Typography,{children:"GDP per capita"})}),(0,t.jsx)(i.MenuItem,{value:"region",children:(0,t.jsx)(l.Typography,{children:"Region"})}),(0,t.jsx)(i.MenuItem,{value:"income",children:(0,t.jsx)(l.Typography,{children:"Income Classification"})})]})]})})}e.s(["ColorBasis",()=>m],15904);var o=o;function h({current:e,viewAction:a}){return(0,t.jsxs)(r.FormControl,{variant:"outlined",fullWidth:!0,size:"small",children:[(0,t.jsx)(n.InputLabel,{id:"regression_select",children:"Regression Type"}),(0,t.jsxs)(o.default,{labelId:"regression_select",label:"Regression Type",value:e,onChange:e=>{a({key:"regression",value:e.target.value})},children:[(0,t.jsx)(i.MenuItem,{value:"none",children:(0,t.jsx)(l.Typography,{children:"None"})}),(0,t.jsx)(i.MenuItem,{value:"linear",children:(0,t.jsx)(l.Typography,{children:"Linear"})}),(0,t.jsx)(i.MenuItem,{value:"logarithmic",children:(0,t.jsx)(l.Typography,{children:"Logarithmic"})}),(0,t.jsx)(i.MenuItem,{value:"polynomial",children:(0,t.jsx)(l.Typography,{children:"Quadratic"})})]})]})}e.s(["RegressionSelect",()=>h],42930);let x={year:{label:"Year",base:"year"},gdpfalse:{label:"GDP per capita",base:"gdp",log:!1},gdptrue:{label:"Log GDP per capita",base:"gdp",log:!0},gdp_pppfalse:{label:"GDP per capita in PPP",base:"gdp_ppp",log:!1},gdp_ppptrue:{label:"Log GDP per capita in PPP",base:"gdp_ppp",log:!0}},y=Object.keys(x).map(e=>{let{label:r}=x[e];return(0,t.jsx)(i.MenuItem,{value:e,children:r},e)});function g({simple:e}){let{levels:f}=(0,s.useContext)(p.DataContext),g=(0,s.useContext)(c.ViewContext),v=(0,s.useContext)(c.ViewActionContext),b=(0,s.useMemo)(()=>[(0,t.jsx)(a.ListSubheader,{children:"Specific Activities"}),...Object.keys(u.activityLabels).filter(e=>"0"!==e[0]).map(e=>(0,t.jsx)(i.MenuItem,{value:e,children:u.activityLabels[e]},e)),(0,t.jsx)(a.ListSubheader,{children:"Aggregate Activities"}),(0,t.jsx)(i.MenuItem,{value:"Agriculture,Industry,Services",children:"Employed"},"Employed"),(0,t.jsx)(i.MenuItem,{value:"Agriculture,Industry,Services,Unemployed",children:"In Labor Force"},"In Laborforce")],[]),j=(0,s.useMemo)(()=>Object.keys(u.sexSummaries).map(e=>(0,t.jsx)(i.MenuItem,{value:e,children:u.sexSummaries[e].label},e)),[]),C=(0,s.useMemo)(()=>["",...Object.keys(f.demo_segments)].map(e=>(0,t.jsx)(i.MenuItem,{value:e,children:e in u.variableInfo?u.variableInfo[e].label:"None"},e)),[f.demo_segments]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Typography,{fontWeight:"bold",children:"1. Outcome (Y-Axis)"}),(0,t.jsxs)(r.FormControl,{variant:"outlined",fullWidth:!0,size:"small",children:[(0,t.jsx)(n.InputLabel,{id:"basic_y_subset_select",children:"Main Activity"}),(0,t.jsx)(o.default,{labelId:"basic_y_subset_select",label:"Main Activity",value:g.y.subset.level,onChange:e=>{let t=e.target.value.split(",").sort();g.y=g.y.copy(),g.y.updateLevel("subset",{key:"level",value:t,levels:f.sectors}),g.y.updateLevel("subset",{key:"adjust",value:""}),v({key:"y",value:g.y})},children:b})]}),(0,t.jsxs)(r.FormControl,{variant:"outlined",fullWidth:!0,size:"small",children:[(0,t.jsx)(n.InputLabel,{id:"basic_y_summary_select",children:"Gender Summary"}),(0,t.jsx)(o.default,{labelId:"basic_y_summary_select",label:"Gender Summary",value:g.y.summary.level+g.y.summary.adjust,onChange:e=>{let t=u.sexSummaries[e.target.value];g.y=g.y.copy(),g.y.updateLevel("summary",{key:"level",value:t.level,levels:f.sexes}),g.y.updateLevel("summary",{key:"adjust",value:t.adjust}),v({key:"y",value:g.y})},children:j})]}),g.as_plot&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Typography,{fontWeight:"bold",children:"2. By (X-Axis)"}),(0,t.jsxs)(r.FormControl,{variant:"outlined",fullWidth:!0,size:"small",children:[(0,t.jsx)(n.InputLabel,{id:"basic_x_select",children:"External Variable"}),(0,t.jsx)(o.default,{labelId:"basic_x_select",label:"External Variable",value:g.x.base+("year"===g.x.base?"":g.x.log),onChange:e=>{v({key:"x",value:new d.Variable(x[e.target.value])})},children:y})]}),(0,t.jsx)(l.Typography,{fontWeight:"bold",children:"3. Styling"}),(0,t.jsx)(m,{current:g.color_source,viewAction:v,outlined:!0}),(0,t.jsx)(h,{current:g.regression,viewAction:v})]}),!e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Typography,{fontWeight:"bold",children:[g.as_plot?4:2,". Split By"]}),(0,t.jsxs)(r.FormControl,{variant:"outlined",fullWidth:!0,size:"small",children:[(0,t.jsx)(n.InputLabel,{id:"basic_y_panel_select",children:"Demographic Subset"}),(0,t.jsx)(o.default,{labelId:"basic_y_panel_select",label:"Demographic Subset",value:g.y_panels,onChange:e=>v({key:"y_panels",value:e.target.value}),children:C})]}),(0,t.jsxs)(l.Typography,{fontWeight:"bold",children:[g.as_plot?5:3,". Time Handling"]}),(0,t.jsxs)(r.FormControl,{size:"small",fullWidth:!0,children:[(0,t.jsx)(n.InputLabel,{id:"basic_time_agg_select",children:"Year Per Country"}),(0,t.jsxs)(o.default,{labelId:"basic_time_agg_select",label:"Year Per Country",value:g.as_plot?g.time_agg:"all"===g.time_agg?"mean":g.time_agg,onChange:e=>{v({key:"time_agg",value:e.target.value})},children:[(0,t.jsx)(i.MenuItem,{value:"all",disabled:!g.as_plot,children:"All Years"}),(0,t.jsx)(i.MenuItem,{value:"first",children:"Earliest Year"}),(0,t.jsx)(i.MenuItem,{value:"specified",children:"Specified Year"}),(0,t.jsx)(i.MenuItem,{value:"last",children:"Latest Year"}),(0,t.jsx)(i.MenuItem,{value:"mean",children:"Average Across Years"})]})]})]})]})}e.s(["BasicMenu",()=>g],58932)},51792,e=>{"use strict";var t=e.i(43476),r=e.i(67786),n=e.i(76552),a=e.i(34251),i=e.i(82472),o=e.i(96423),l=e.i(63745),s=e.i(69437),u=e.i(66796),d=e.i(71645),c=e.i(32109),p=e.i(63250);let f=(0,o.createFilterOptions)({stringify:e=>e.searchString}),m={};function h({backgroundColor:e}){let o=(0,d.useContext)(p.FilterContext),h=(0,d.useContext)(p.FilterActionContext),x=(0,d.useContext)(c.DataContext),y=(0,d.useCallback)(e=>{if(!(e in m)){let t=x.countryInfo[e];m[e]=t?{key:e,searchString:JSON.stringify(t),name:t.name,region:t.region}:{key:e,searchString:e,name:e,region:"unknown"}}return m[e]},[x.countryInfo]),g=(0,d.useMemo)(()=>Object.keys(x.levels.countries).map(y),[x.levels.countries,y]),v=(0,d.useMemo)(()=>Object.keys(o.countries).map(y),[o.countries,y]),b=(0,d.useCallback)(e=>{let t=o.countries,r=!0;return g.forEach(n=>{r&&n.region===e&&(r=n.key in t)}),r},[o.countries,g]);return(0,t.jsxs)(l.Stack,{direction:"row",children:[(0,t.jsx)(r.Autocomplete,{options:g,groupBy:e=>e.region,sx:{"& li":{p:0}},renderGroup:r=>(0,t.jsxs)(n.Box,{children:[(0,t.jsxs)(l.Stack,{direction:"row",sx:{position:"sticky",top:"-8px",backgroundColor:e,alignItems:"center",zIndex:1},children:[(0,t.jsx)(i.Checkbox,{onChange:(e,t)=>{let n={...o.countries};g.forEach(e=>{e.region===r.group&&(t?n[e.key]=!0:delete n[e.key])}),h({key:"countries",value:n})},checked:b(r.group)},r.group),(0,t.jsx)(u.Typography,{fontSize:"small",children:r.group})]}),r.children]},r.key),renderOption:(e,r,{selected:n})=>{let{key:a,...o}=e;return(0,t.jsxs)("li",{...o,style:{paddingTop:0,paddingBottom:0},children:[(0,t.jsx)(i.Checkbox,{checked:n,size:"small"}),(0,t.jsx)(u.Typography,{fontSize:"small",children:r.name+(r.name===r.key?"":" ("+r.key+")")})]},a)},getOptionLabel:e=>e.key,renderInput:e=>(0,t.jsx)(s.TextField,{...e,label:"Countries"}),filterOptions:f,value:v,renderValue:()=>(0,t.jsxs)(u.Typography,{sx:{p:1,pt:0,pb:0,whiteSpace:"nowrap"},children:[v.length," / ",g.length]}),multiple:!0,disableCloseOnSelect:!0,fullWidth:!0,size:"small",onChange:(e,t)=>{let r={};t.forEach(e=>r[e.key]=!0),h({key:"countries",value:r})}}),(0,t.jsx)(a.Button,{size:"small",variant:"contained",onClick:()=>h({key:"countries",value:x.levels.countries}),children:"All"})]})}e.s(["FilterCountry",()=>h])},64232,(e,t,r)=>{e.e,t.exports=function(){var e=[function(e,t,r){var n;void 0===(n=(function(e){return{clustering:r(1),regression:r(5),statistics:r(6),histogram:r(15),transform:{regression:r(18),histogram:r(21),clustering:r(22)}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(2),n=t.dataPreprocess,a=t.normalizeDimensions,i=r(3),o=r(4),l=i.size,s=i.sumOfColumn,u=i.sum,d=i.zeros,o=r(4),c=o.isNumber,p=Math.pow,f={SINGLE:"single",MULTIPLE:"multiple"};function m(e,t){for(var r,n,a=[],i=0;i<t.dimensions.length;i++){var o=t.dimensions[i];r=0;for(var l=0;l<e.length;l++)r+=e[l][o];n=r/e.length,a.push(n)}return a}function h(e,t){var r=t.outputCentroidDimensions;if(t.outputType===f.SINGLE&&null!=r)for(var n=e.data,a=e.centroids,i=0;i<n.length;i++)for(var o=n[i],l=a[o[t.outputClusterIndexDimension]],s=Math.min(l.length,r.length),u=0;u<s;u++)o[r[u]]=l[u]}function x(e,t,r){for(var n=0,a=r.dimensions,i=r.rawExtents,o=0;o<a.length;o++){var l=i[o].span;l&&(n+=p((e[a[o]]-t[o])/l,2))}return n}function y(e,t){for(var r=[],n=t.length,a=0;a<n;a++)r.push({min:1/0,max:-1/0});for(var a=0;a<e.length;a++)for(var i=e[a],o=0;o<n;o++){var l=r[o],s=i[t[o]];l.min>s&&(l.min=s),l.max<s&&(l.max=s)}for(var a=0;a<n;a++)r[a].span=r[a].max-r[a].min;return r}return{OutputType:f,hierarchicalKMeans:function(e,t,r){var i,p,g,v,b,j,C,_,M,w=(c(t)?{clusterCount:t,stepByStep:r}:t)||{clusterCount:2},I=w.clusterCount;if(!(I<2)){var S=function(e,t){var r=l(e);if(r.length<1)throw Error("The input data of clustering should be two-dimension array.");for(var n=r[1],i=[],s=0;s<n;s++)i.push(s);var u=a(t.dimensions,i),d=t.outputType||f.MULTIPLE,c=t.outputClusterIndexDimension;if(d===f.SINGLE&&!o.isNumber(c))throw Error("outputClusterIndexDimension is required as a number.");var p=y(e,u);return{dimensions:u,rawExtents:p,outputType:d,outputClusterIndexDimension:c,outputCentroidDimensions:t.outputCentroidDimensions}}(e,w),k=S.outputType===f.SINGLE,D=n(e,{dimensions:S.dimensions}),T=d(D.length,2);if(k){i=[];var P=S.outputClusterIndexDimension;p=function(e,t){i[e][P]=t},g=function(e){return i[e][P]};for(var A=0;A<D.length;A++)i.push(D[A].slice()),T[A][1]=0,p(A,0)}else p=function(e,t){T[e][0]=t},g=function(e){return T[e][0]};for(var F=m(D,S),E=[F],A=0;A<D.length;A++){var O,L,R=x(D[A],F,S);O=A,L=R,T[O][1]=L}var W=1,N={data:i,centroids:E,isEnd:!1};if(k||(N.clusterAssment=T),w.stepByStep)N.next=function(){return B(),h(N,S),N};else for(;B(),!N.isEnd;);return h(N,S),N}function B(){if(W<I){v=1/0;for(var e,t,r,n,a,i=0;i<E.length;i++){b=[],j=[];for(var o=0;o<D.length;o++)g(o)===i?b.push(D[o]):j.push(T[o][1]);(_=s((C=function(e,t,r){for(var n,a,i,o,l=d(e.length,2),s=function(e,t){for(var r=d(2,t.length),n=0;n<t.length;n++)for(var a=t[n],i=0;i<2;i++)r[i][n]=a.min+a.span*Math.random();return r}(2,y(e,r.dimensions)),u=!0;u;){u=!1;for(var c=0;c<e.length;c++){n=1/0,a=-1;for(var p=0;p<2;p++)(i=x(e[c],s[p],r))<n&&(n=i,a=p);l[c][0]!==a&&(u=!0),l[c][0]=a,l[c][1]=n}for(var c=0;c<2;c++){o=[];for(var p=0;p<l.length;p++)l[p][0]===c&&o.push(e[p]);s[c]=m(o,r)}}return{centroids:s,clusterAssigned:l}}(b,0,S)).clusterAssigned,1))+(M=u(j))<v&&(v=M+_,r=i,n=C.centroids,a=C.clusterAssigned)}for(var o=0;o<a.length;o++)0===a[o][0]?a[o][0]=r:1===a[o][0]&&(a[o][0]=E.length);E[r]=n[0],E.push(n[1]);for(var o=0,i=0;o<D.length&&i<a.length;o++)g(o)===r&&(p(o,a[i][0]),e=o,t=a[i++][1],T[e][1]=t);var l=[];if(!k){for(var o=0;o<E.length;o++){l[o]=[];for(var i=0;i<D.length;i++)g(i)===o&&l[o].push(D[i])}N.pointsInCluster=l}W++}else N.isEnd=!0}}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(3),n=t.isArray,a=t.size,i=r(4).isNumber;return{normalizeDimensions:function(e,t){return"number"==typeof e?[e]:null==e?t:e},dataPreprocess:function(e,t){var r=(t=t||{}).dimensions,o={};if(null!=r)for(var l=0;l<r.length;l++)o[r[l]]=!0;var s=t.toOneDimensionArray?r?r[0]:0:null;if(!n(e))throw Error("Invalid data type, you should input an array");var u=[],d=a(e);if(1===d.length)for(var l=0;l<d[0];l++){var c=e[l];i(c)&&u.push(c)}else if(2===d.length)for(var l=0;l<d[0];l++){for(var p,f=!0,c=e[l],m=0;m<d[1];m++)p=m,(!r||o.hasOwnProperty(p))&&!i(c[m])&&(f=!1);f&&u.push(null!=s?c[s]:c)}return u},getPrecision:function(e){var t=e.toString(),r=t.indexOf(".");return r<0?0:t.length-1-r}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=Object.prototype.toString,r=Array.prototype.map;function n(e){return"[object Array]"===t.call(e)}function a(e,t){return e>t?1:e<t?-1:e===t?0:NaN}return{size:function(e){for(var t=[];n(e);)t.push(e.length),e=e[0];return t},isArray:n,zeros:function(e,t){for(var r=[],n=0;n<e;n++){r[n]=[];for(var a=0;a<t;a++)r[n][a]=0}return r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t},sumOfColumn:function(e,t){for(var r=0,n=0;n<e.length;n++)r+=e[n][t];return r},ascending:a,bisect:function(e,t,r,n){for(null==r&&(r=0),null==n&&(n=e.length);r<n;){var i=Math.floor((r+n)/2),o=a(e[i],t);if(o>0)n=i;else{if(!(o<0))return i+1;r=i+1}}return r},map:function(e,t,n){if(e&&t)if(e.map&&e.map===r)return e.map(t,n);else{for(var a=[],i=0,o=e.length;i<o;i++)a.push(t.call(n,e[i],i,e));return a}}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){return{isNumber:function(e){return"number"==typeof(e=null===e?NaN:+e)&&!isNaN(e)},isInteger:function(e){return isFinite(e)&&e===Math.round(e)},quantityExponent:function(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(2),n=t.dataPreprocess,a=t.normalizeDimensions,i={linear:function(e,t){for(var r=t.dimensions[0],n=t.dimensions[1],a=0,i=0,o=0,l=0,s=e.length,u=0;u<s;u++){var d=e[u];a+=d[r],i+=d[n],o+=d[r]*d[n],l+=d[r]*d[r]}for(var c=(s*o-a*i)/(s*l-a*a),p=i/s-c*a/s,f=[],m=0;m<e.length;m++){var d=e[m],h=d.slice();h[r]=d[r],h[n]=c*d[r]+p,f.push(h)}var x="y = "+Math.round(100*c)/100+"x + "+Math.round(100*p)/100;return{points:f,parameter:{gradient:c,intercept:p},expression:x}},linearThroughOrigin:function(e,t){for(var r=t.dimensions[0],n=t.dimensions[1],a=0,i=0,o=0;o<e.length;o++){var l=e[o];a+=l[r]*l[r],i+=l[r]*l[n]}for(var s=i/a,u=[],d=0;d<e.length;d++){var l=e[d],c=l.slice();c[r]=l[r],c[n]=l[r]*s,u.push(c)}var p="y = "+Math.round(100*s)/100+"x";return{points:u,parameter:{gradient:s},expression:p}},exponential:function(e,t){for(var r=t.dimensions[0],n=t.dimensions[1],a=0,i=0,o=0,l=0,s=0,u=0;u<e.length;u++){var d=e[u];d[r],a+=d[n],s+=d[r]*d[n],i+=d[r]*d[r]*d[n],o+=d[n]*Math.log(d[n]),l+=d[r]*d[n]*Math.log(d[n])}for(var c=a*i-s*s,p=Math.pow(Math.E,(i*o-s*l)/c),f=(a*l-s*o)/c,m=[],h=0;h<e.length;h++){var d=e[h],x=d.slice();x[r]=d[r],x[n]=p*Math.pow(Math.E,f*d[r]),m.push(x)}var y="y = "+Math.round(100*p)/100+"e^("+Math.round(100*f)/100+"x)";return{points:m,parameter:{coefficient:p,index:f},expression:y}},logarithmic:function(e,t){for(var r=t.dimensions[0],n=t.dimensions[1],a=0,i=0,o=0,l=0,s=0;s<e.length;s++){var u=e[s];a+=Math.log(u[r]),i+=u[n]*Math.log(u[r]),o+=u[n],l+=Math.pow(Math.log(u[r]),2)}for(var d=(s*i-o*a)/(s*l-a*a),c=(o-d*a)/s,p=[],f=0;f<e.length;f++){var u=e[f],m=u.slice();m[r]=u[r],m[n]=d*Math.log(u[r])+c,p.push(m)}var h="y = "+Math.round(100*c)/100+" + "+Math.round(100*d)/100+"ln(x)";return{points:p,parameter:{gradient:d,intercept:c},expression:h}},polynomial:function(e,t){var r=t.dimensions[0],n=t.dimensions[1],a=t.order;null==a&&(a=2);for(var i=[],o=[],l=a+1,s=0;s<l;s++){for(var u=0,d=0;d<e.length;d++){var c=e[d];u+=c[n]*Math.pow(c[r],s)}o.push(u);for(var p=[],f=0;f<l;f++){for(var m=0,h=0;h<e.length;h++)m+=Math.pow(e[h][r],s+f);p.push(m)}i.push(p)}i.push(o);for(var x=function(e,t){for(var r=0;r<e.length-1;r++){for(var n=r,a=r+1;a<e.length-1;a++)Math.abs(e[r][a])>Math.abs(e[r][n])&&(n=a);for(var i=r;i<e.length;i++){var o=e[i][r];e[i][r]=e[i][n],e[i][n]=o}for(var l=r+1;l<e.length-1;l++)for(var s=e.length-1;s>=r;s--)e[s][l]-=e[s][r]/e[r][r]*e[r][l]}for(var u=Array(t),d=e.length-1,a=e.length-2;a>=0;a--){for(var o=0,r=a+1;r<e.length-1;r++)o+=e[r][a]*u[r];u[a]=(e[d][a]-o)/e[a][a]}return u}(i,l),y=[],s=0;s<e.length;s++){for(var g=0,c=e[s],d=0;d<x.length;d++)g+=x[d]*Math.pow(c[r],d);var v=c.slice();v[r]=c[r],v[n]=g,y.push(v)}for(var b="y = ",s=x.length-1;s>=0;s--)s>1?b+=Math.round(x[s]*Math.pow(10,s+1))/Math.pow(10,s+1)+"x^"+s+" + ":1===s?b+=Math.round(100*x[s])/100+"x + ":b+=Math.round(100*x[s])/100;return{points:y,parameter:x,expression:b}}};return function(e,t,r){var o="number"==typeof r?{order:r}:r||{},l=a(o.dimensions,[0,1]),s=n(t,{dimensions:l}),u=i[e](s,{order:o.order,dimensions:l}),d=l[0];return u.points.sort(function(e,t){return e[d]-t[d]}),u}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t={};return t.max=r(7),t.deviation=r(8),t.mean=r(10),t.median=r(12),t.min=r(14),t.quantile=r(13),t.sampleVariance=r(9),t.sum=r(11),t}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(4).isNumber;return function(e){for(var r=-1/0,n=0;n<e.length;n++)t(e[n])&&e[n]>r&&(r=e[n]);return r}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(9);return function(e){var r=t(e);return r?Math.sqrt(r):r}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(4).isNumber,n=r(10);return function(e){var r=e.length;if(!r||r<2)return 0;if(e.length>=2){for(var a,i=n(e),o=0,l=0;l<e.length;l++)t(e[l])&&(o+=(a=e[l]-i)*a);return o/(e.length-1)}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(11);return function(e){return e.length?t(e)/e.length:0}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(4).isNumber;return function(e){var r=e.length;if(!r)return 0;for(var n=0,a=0;a<r;a++)t(e[a])&&(n+=e[a]);return n}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(13);return function(e){return t(e,.5)}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){return function(e,t){var r=e.length;if(!r)return 0;if(t<=0||r<2)return e[0];if(t>=1)return e[r-1];var n=(r-1)*t,a=Math.floor(n),i=e[a];return i+(e[a+1]-i)*(n-a)}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(4).isNumber;return function(e){for(var r=1/0,n=0;n<e.length;n++)t(e[n])&&e[n]<r&&(r=e[n]);return r}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(7),n=r(14),a=r(13),i=r(8),o=r(2),l=o.dataPreprocess,s=o.normalizeDimensions,u=r(3),d=u.ascending,c=u.map,p=r(16),f=u.bisect,m=r(17),h={squareRoot:function(e){var t=Math.ceil(Math.sqrt(e.length));return t>50?50:t},scott:function(e,t,r){return Math.ceil((r-t)/(3.5*i(e)*Math.pow(e.length,-1/3)))},freedmanDiaconis:function(e,t,r){return e.sort(d),Math.ceil((r-t)/(2*(a(e,.75)-a(e,.25))*Math.pow(e.length,-1/3)))},sturges:function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}};return function(e,r){for(var a="string"==typeof r?{method:r}:r||{},i=null==a.method?h.squareRoot:h[a.method],o=l(e,{dimensions:s(a.dimensions),toOneDimensionArray:!0}),u=t(o),d=n(o),x=i(o,d,u),y=m(d,u,x),g=y.step,v=y.toFixedPrecision,b=p(+(Math.ceil(d/g)*g).toFixed(v),+(Math.floor(u/g)*g).toFixed(v),g,v),j=b.length,C=Array(j+1),_=0;_<=j;_++)C[_]={},C[_].sample=[],C[_].x0=_>0?b[_-1]:b[_]-d===g?d:b[_]-g,C[_].x1=_<j?b[_]:u-b[_-1]===g?u:b[_-1]+g;for(var _=0;_<o.length;_++)d<=o[_]&&o[_]<=u&&C[f(b,o[_],0,j)].sample.push(o[_]);var e=c(C,function(e){return[+((e.x0+e.x1)/2).toFixed(v),e.sample.length,e.x0,e.x1,e.x0+" - "+e.x1]}),M=c(C,function(e){return[e.x0,e.x1,e.sample.length]});return{bins:C,data:e,customData:M}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(2).getPrecision;return function(e,r,n,a){var i=arguments.length;i<2?(r=e,e=0,n=1):i<3?n=1:i<4?(n*=1,a=t(n)):a*=1;for(var o=Math.ceil(((r-e)/n).toFixed(a)),l=Array(o+1),s=0;s<o+1;s++)l[s]=+(e+s*n).toFixed(a);return l}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(4);return function(e,r,n){var a=Math.abs(r-e)/n,i=t.quantityExponent(a),o=Math.pow(10,i),l=a/o;l>=Math.sqrt(50)?o*=10:l>=Math.sqrt(10)?o*=5:l>=Math.sqrt(2)&&(o*=2);var s=i<0?-i:0;return{step:+(r>=e?o:-o).toFixed(s),toFixedPrecision:s}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(5),n=r(19);return{type:"ecStat:regression",transform:function(e){var r,a=e.upstream,i=e.config||{},o=t(i.method||"linear",a.cloneRawData(),{order:i.order,dimensions:n.normalizeExistingDimensions(e,i.dimensions)}),l=o.points,s=i.formulaOn;if(null==s&&(s="end"),"none"!==s){for(var u=0;u<l.length;u++)l[u][2]="start"===s&&0===u||"all"===s||"end"===s&&u===l.length-1?o.expression:"";(r=a.cloneAllDimensionInfo())[2]={}}return[{dimensions:r,data:l}]}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(3),n=r(4),a=r(20);return{normalizeExistingDimensions:function(e,r){if(null!=r){var n=e.upstream;if(t.isArray(r)){for(var a=[],i=0;i<r.length;i++){var o=n.getDimensionInfo(r[i]);l(o,r[i]),a[i]=o.index}return a}var o=n.getDimensionInfo(r);return l(o,r),o.index}function l(e,t){if(!e)throw Error("Can not find dimension by "+t)}},normalizeNewDimensions:function(e){if(t.isArray(e)){for(var r=[],i=[],o=0;o<e.length;o++){var l=s(e[o]);r.push(l.name),i.push(l.index)}return{name:r,index:i}}if(null!=e)return s(e);function s(e){if(n.isNumber(e))return{index:e};if(a.isObject(e)&&n.isNumber(e.index))return e;throw Error("Illegle new dimensions config. Expect `{ name: string, index: number }`.")}}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){return{extend:function(e,t){return Object.assign(e,t),e},isObject:function(e){let t=typeof e;return"function"===t||!!e&&"object"===t}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(15),n=r(19);return{type:"ecStat:histogram",transform:function(e){var r=e.upstream,a=e.config||{},i=t(r.cloneRawData(),{method:a.method,dimensions:n.normalizeExistingDimensions(e,a.dimensions)});return[{dimensions:["MeanOfV0V1","VCount","V0","V1","DisplayableName"],data:i.data},{data:i.customData}]}}}).call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;void 0===(n=(function(e){var t=r(1),n=r(4),a=r(19),i=n.isNumber;return{type:"ecStat:clustering",transform:function(e){var r=e.upstream,n=e.config||{},o=n.clusterCount;if(!i(o)||o<=0)throw Error('config param "clusterCount" need to be specified as an interger greater than 1.');if(1===o)return[{},{data:[]}];var l=a.normalizeNewDimensions(n.outputClusterIndexDimension),s=a.normalizeNewDimensions(n.outputCentroidDimensions);if(null==l)throw Error("outputClusterIndexDimension is required as a number.");for(var u=t.hierarchicalKMeans(r.cloneRawData(),{clusterCount:o,stepByStep:!1,dimensions:a.normalizeExistingDimensions(e,n.dimensions),outputType:t.OutputType.SINGLE,outputClusterIndexDimension:l.index,outputCentroidDimensions:(s||{}).index}),d=r.cloneAllDimensionInfo(),c=[],p=0;p<d.length;p++){var f=d[p];c.push(f.name)}if(c[l.index]=l.name,s)for(var p=0;p<s.index.length;p++)null!=s.name[p]&&(c[s.index[p]]=s.name[p]);return[{dimensions:c,data:u.data},{data:u.centroids}]}}}).call(t,r,t,e))||(e.exports=n)}],t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}return r.m=e,r.c=t,r.p="",r(0)}()},53138,(e,t,r)=>{t.exports=e.r(64232)},67585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=e.r(32061);function a({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new n.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,r)=>{"use strict";function n(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return n}})},52157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return s}});let n=e.r(43476),a=e.r(74080),i=e.r(63599),o=e.r(9885),l=e.r(43369);function s({moduleIds:e}){if("u">typeof window)return null;let t=i.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let n=t.reactLoadableManifest;for(let t of e){if(!n[t])continue;let e=n[t].files;r.push(...e)}}if(0===r.length)return null;let s=(0,l.getDeploymentIdQueryOrEmptyString)();return(0,n.jsx)(n.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,o.encodeURIPath)(e)}${s}`;return e.endsWith(".css")?(0,n.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,a.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return u}});let n=e.r(43476),a=e.r(71645),i=e.r(67585),o=e.r(52157);function l(e){return{default:e&&"default"in e?e.default:e}}let s={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},u=function(e){let t={...s,...e},r=(0,a.lazy)(()=>t.loader().then(l)),u=t.loading;function d(e){let l=u?(0,n.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,s=!t.ssr||!!t.loading,d=s?a.Suspense:a.Fragment,c=t.ssr?(0,n.jsxs)(n.Fragment,{children:["u"<typeof window?(0,n.jsx)(o.PreloadChunks,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(d,{...s?{fallback:l}:{},children:c})}return d.displayName="LoadableComponent",d}},70703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let n=e.r(55682)._(e.r(69093));function a(e,t){let r={};"function"==typeof e&&(r.loader=e);let a={...r,...t};return(0,n.default)({...a,modules:a.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},98144,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(32109),a=e.i(41143),i=e.i(53138),o=e.i(96631);let l=/\b(\w)/g,s=["#A3651E","#2F8CBF","#C4AB4B","#72CED5","#C8E9B6","#7E1700","#1549A2"],u=["triangle","diamond","rect","roundRect","pin","arrow","circle"],d={gdp:"name",region:"region",income:"income"};var c=e.i(71933),p=e.i(6487),f=e.i(355),m=e.i(9829),h=e.i(16508),x=e.i(93611),y=e.i(91996),g=e.i(19153),v=e.i(95682),b=e.i(70105),j=e.i(80600),C=e.i(76552),_=e.i(37563),M=e.i(63250);function w({min:e},t=1){return+(e<0||e-t>0?e-t:e>.1?e:0).toFixed(2)}function I({max:e},t=1){return+(e+t).toFixed(2)}function S(e,t,r){let n=e[0]>1900?0:Math.max(.01,.02*Math.abs(e[0]-e[1]));r?(t.min=+(e[0]-n).toFixed(2),t.max=+(e[2]+n).toFixed(2)):(t.min=e=>w(e,n),t.max=e=>I(e,n))}function k(e,t){if("year"===t.base)return e;if(t.isGlobal&&t.log)return(0,o.formatNumber)(Math.round(Math.E**e));let r=Math.abs(e),n=r<1?3:2;return r>1e3?r>2e9?e.toExponential(1):r>1e9?(e/1e9).toFixed(n)+"B":r<1e6?(e/1e3).toFixed(n)+"K":(e/1e6).toFixed(n)+"M":r%1==0?""+e:e.toFixed(n)}let D={min:w,max:I},T={},P={textGapX:30,textGapY:50,top:50,topNoLabel:40,left:95,bottom:20,gapX:73,gapY:85,legendWidth:0},A={current:[]};function F(e,t){let r=P[""===A.current[0].label?"topNoLabel":"top"],n=(e.height-(r+P.bottom+P.gapY*t[0].nYLevels))/t[0].nYLevels,a=(e.width-(P.left+P.legendWidth+P.gapX*t[0].nXLevels))/t[0].nXLevels,i=[];return t.forEach(e=>{e.left=e.xIndex?a*e.xIndex+P.gapX*(e.xIndex+1)+20:P.left,e.top=e.yIndex?n*e.yIndex+P.gapY*(e.yIndex+1)-35:r,e.height=n,e.width=a,i.push({label:e.label,left:e.left-P.textGapX,top:e.top-P.textGapY,nCountries:e.nCountries})}),{title:i,grid:t}}function E({input:e,view:n,countryInfo:a,modeOverride:i}){(0,r.useEffect)(()=>{(0,c.use)([m.DatasetComponent,g.TitleComponent,x.GridComponent,b.TooltipComponent,v.ToolboxComponent,y.LegendComponent,f.LineChart,j.CanvasRenderer,h.GraphicComponent])},[]);let l=(0,r.useContext)(M.FilterContext),s=(0,r.useContext)(M.FilterActionContext),{mode:u}=(0,_.useColorScheme)(),d=i||u,{series:w,fits:I,panels:E,range:O,varIndices:L}=e;A.current=E;let R=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=R.current?(0,p.init)(R.current,d,{renderer:"canvas"}):null,t=()=>{if(e){let t=e.getDom().getBoundingClientRect(),r=e.getOption().grid;r&&r.length&&(e.setOption(F(t,r)),e.resize())}};return e&&e.on("click",e=>{if(Array.isArray(e.data)){let t=e.data[e.data.length-1];t in a&&s({key:"countries",value:{[t]:!0}})}}),window.addEventListener("resize",t),()=>{e&&e.dispose(),window.removeEventListener("resize",t)}},[d,a,s]);let W=(0,r.useCallback)(({marker:e,seriesName:t,value:r})=>{let i="country"===n.color&&a[r[L.country]];return'<div class="tooltip-table">'+(n.color?e+(i?i.name+" ("+i.ISO_A3+")":t):"")+"<table>"+(i?"<tr><td>World Bank Region</td><td><strong>"+i.region+"</strong></td></tr>":"")+("year"in L&&"year"!==n.x.base&&"year"!==n.y.base?"<tr><td>Year</td><td><strong>"+r[L.year]+"</strong></td></tr>":"")+(n.symbol?"<tr><td>"+n.symbol+"</td><td><strong>"+r[L[n.symbol in L?n.symbol:"level"]]+"</strong></td></tr>":"")+"<tr><td>"+n.x.name+(n.x.isGlobal?"":`<br><code class="variable-description">${n.x.description}</code>`)+"</td><td><strong>"+(0,o.formatNumber)(r[L.x],n.x)+"</strong></td></tr><tr><td>"+n.y.name+(n.y.isGlobal?"":`<br><code class="variable-description">${n.y.description}</code>`)+"</td><td><strong>"+(0,o.formatNumber)(r[L.y],n.y)+"</strong></td></tr></table></div>"},[n,a,L]);return(0,r.useEffect)(()=>{if(R.current){let e=(0,p.getInstanceByDom)(R.current);if(e)if(w.length){S(O.x,T,n.lock_range),S(O.y,D,n.lock_range);let t="dark"===d?{bg:"#121212",text:"#ffffff"}:{bg:"#ffffff",text:"#000000"};P.legendWidth=0,n.color&&(w.forEach(e=>{let t=e.name.length;t>P.legendWidth&&(P.legendWidth=t)}),P.legendWidth+=4,P.legendWidth*=4.6);let r=R.current.getBoundingClientRect(),i=r.height<500||r.width<800?.7:1;A.current=E;let{title:s,grid:u}=F(r,E);e.setOption({darkMode:"dark"===d,legend:{top:"55",align:"right",right:"right",orient:"vertical",type:"scroll",data:n.color?[...new Set(w.map(e=>e.name).sort())]:[]},backgroundColor:t.bg,tooltip:{textStyle:{color:t.text},backgroundColor:t.bg+"60",borderWidth:0,axisPointer:{type:"line"},formatter:W,position:o.tooltipPlacer,appendToBody:!0},xAxis:E.map((e,t)=>({type:"value",gridIndex:t,axisLabel:{formatter:e=>k(e,n.x)},...T})),yAxis:E.map((e,t)=>({type:"value",gridIndex:t,axisLabel:{formatter:e=>k(e,n.y)},...D})),graphic:[{type:"text",rotation:Math.PI/2,left:20,top:"center",width:"100%",style:{text:n.y.name,fill:t.text,font:`bold ${i}em "Roboto","Helvetica","Arial",sans-serif`,textAlign:"center"}},{type:"text",left:"center",bottom:20,style:{text:n.x.name,fill:t.text,font:`bold ${i}em "Roboto","Helvetica","Arial",sans-serif`,textAlign:"center"}}],title:s.map(({label:e,top:t,left:r,nCountries:n})=>{let i=w[0].data&&w[0].data.length?w[0].data[0]:[];return{text:e,subtext:(1===n&&i[L.country]in a?`Data from ${a[i[L.country]].name}`:`Observations from ${n} ${1===n?"country":"countries"}`)+(l&&l.sectors.length<5?", sector = "+l.sectors.join(", "):"")+(l&&1===l.sexes.length?", sex = "+l.sexes[0]:""),top:t,left:r,contain:!0,subtextStyle:{align:"right",verticalAlign:"center",width:"100%"},textStyle:{fontSize:"1em",fontWeight:"normal"}}}),grid:u,series:I.length?[...w,...I]:w,toolbox:{feature:{saveAsImage:{name:"gender_growth_gap_"+n.y.toFileName()+(n.x?"_"+n.x.toFileName():"")}}}},!0,!0)}else e.clear()}},[e,d,W,E,I,O,w,n,l,a,L.country]),setTimeout(()=>window.dispatchEvent(new Event("resize")),100),(0,t.jsx)(C.Box,{ref:R,sx:{width:"100%",height:"100%",minWidth:500*O.panel[0]+"px",minHeight:300*O.panel[1]+"px",overflow:"hidden"}})}var O=e.i(66796);let L=(0,e.i(70703).default)(()=>e.A(78878),{loadableGenerated:{modules:[5255]}});function R({full:e,view:r,final:n,modeOverride:a}){let i=1/n.range.panel[0]*99+"%",o=1/n.range.panel[1]*99+"%";return n.series.map(l=>(0,t.jsx)(C.Box,{sx:{height:o,width:i},children:(0,t.jsx)(L,{input:{series:[l],range:n.range,varIndices:n.varIndices},map:e.map,countryInfo:e.countryInfo,view:r,modeOverride:a})},l.id))}function W(e,t){return e?e in t?"level":e:""}function N({mode:e}){let c=(0,r.useContext)(n.DataContext),p=(0,r.useContext)(M.ViewContext),f=(0,r.useContext)(M.FilteredContext),m=(0,r.useMemo)(()=>(function(e,t,r,n){var c;let p,{panelX:f,panelY:m,color:h,symbol:x}=r,y=f?(0,o.unique)(e,f):[""],g=m?(0,o.unique)(e,m):[""],v=y.length,b=g.length,j=[],C=[],_=[],M={},w="gdp"===t.color_source?"color":t.color_source+"_color",I=[];"all"==t.time_agg&&I.push("year"),t.as_plot&&(h&&I.push(h),h&&x&&(I.push(x),(0,o.unique)(e,x).forEach((e,t)=>{M[e]={symbol:u[t%7],opacity:.8}})));let S=t.as_plot?{type:"line",symbolSize:10,color:h?"":"#a5cdff",itemStyle:{opacity:1},lineStyle:{width:1,opacity:1},emphasis:{focus:"series",lineStyle:{width:5,opacity:1}}}:{type:"map",roam:!0,map:"countries",nameProperty:"ISO_A3",itemStyle:{areaColor:"#00000000",borderWidth:1},select:{disabled:!0},projection:{project:e=>[e[0]/180*Math.PI,-Math.log(Math.tan((Math.PI/2+e[1]/180*Math.PI)/2))],unproject:e=>[180*e[0]/Math.PI,360/Math.PI*Math.atan(Math.exp(e[1]))-90]}},k=-1,D={x:[1/0,-1/0,-1/0],y:[1/0,-1/0,-1/0],panel:[v,g.length]},T={},P={y:t.y.baseFormula()},A={n_years:"distinct(d.year)",y:`${a.selectableVariables.includes(t.y.base)||t.y.isGlobal?"max":"sum"}(d.y)`,y_sum:"max(d.y_sum)",year:"max(d.year)"};t.as_plot&&t.x.base&&(A.x=`${a.selectableVariables.includes(t.x.base)||t.x.isGlobal?"max":"sum"}(d.x)`,A.x_sum="max(d.x_sum)",P.x=t.x.baseFormula());let F=t.color&&"country"!==t.color?(c=t.color,p={},e.ungroup().rollup({l:`array_agg_distinct(d.${-1===e.columnIndex(c)?"level":c})`}).array("l")[0].forEach((e,t)=>p[e]=t),p):{},E={y:t.y.percent?"mean(d.y)":"mean(d.y / d.n_years)",year:"max(d.year)"};t.as_plot&&t.x.base&&(E.x=t.x.percent?"mean(d.x)":"mean(d.x / d.n_years)");let O={y:t.y.formula("y")},L={};t.as_plot&&t.x.base&&(L.x=t.x.formula("x"));let R=t.as_plot?[...I]:["country"],W=R.includes("country")&&t.country_center&&t.as_plot&&"all"===t.time_agg,N={},B={x:!1,y:!1};t.y.summary.variable&&(N.y=t.y.summaryFormula("y"),"/"===t.y.summary.adjust&&(B.y=!0,N.y_off=t.y.offLevelFormula("y"),A.y_off="max(d.y_off)"),t.y.summary.overall||(A.y_summary_sum="max(d.y_summary_sum)"),B.y&&t.y.percent&&(O.y_off=`d.y_off / d.y${t.y.summary.overall?"":"_summary"}_sum * 100`)),t.as_plot&&t.x.summary.variable&&(N.x=t.x.summaryFormula("x"),"/"===t.x.summary.adjust&&(B.x=!0,N.x_off=t.x.offLevelFormula("x"),A.x_off="max(d.x_off)"),t.x.summary.overall||(A.x_summary_sum="max(d.x_summary_sum)"),B.x&&t.x.percent&&(L.x_off=`d.x_off / d.x${t.x.summary.overall?"":"_summary"}_sum * 100`));let $="mean"===t.time_agg||"all"===t.time_agg&&!t.as_plot,z=[];t.as_plot&&"all"===t.time_agg&&z.push("year"),("country"===t.color||"country"===t.symbol)&&z.push("country");let G=e.groupby(z).derive({x_sum:`sum(d.${t.x.base})`,y_sum:`sum(d.${t.y.base})`});!t.within_split&&(N.x&&(G=G.groupby([...z,t.x.summary.variable].filter(e=>!!e)).derive({x_summary_sum:`sum(d.${t.x.base})`})),N.y&&(G=G.groupby([...z,t.y.summary.variable].filter(e=>!!e)).derive({y_summary_sum:`sum(d.${t.y.base})`})));let Y=G.groupby(R);return y.forEach((e,r)=>{g.forEach((u,c)=>{k++;let p=((e?a.variableInfo[t.x_panels].label+": "+e+(u?", ":""):"")+(u?a.variableInfo[t.y_panels].label+": "+u:"")).replace("_"," ").replace(l,e=>e.toUpperCase()),y=Y;if(f&&(y=y.filter(`d.${f} == '${e}'`)),m&&(y=y.filter(`d.${m} == '${u}'`)),!y.numRows())return;t.within_split&&(N.x&&(y=y.groupby([...z,t.x.summary.variable].filter(e=>!!e)).derive({x_summary_sum:`sum(d.${t.x.base})`})),N.y&&(y=y.groupby([...z,t.y.summary.variable].filter(e=>!!e)).derive({y_summary_sum:`sum(d.${t.y.base})`})));let g=(0,o.unique)(y,"country").length,G={...A};if(y=y.derive(P),N.y||N.x?(y=y.derive(N).groupby([...z,...R,t.x.summary.variable,t.y.summary.variable].filter(e=>!!e)).rollup(G),L.x&&(y=y.groupby([...z,t.x.summary.variable].filter(e=>!!e)).derive(L)),O.y&&(y=y.groupby([...z,t.y.summary.variable].filter(e=>!!e)).derive(O)),y=y.groupby(R).rollup(G),B.y&&(y=y.derive({y:"d.y_off ? d.y / d.y_off : 0"})),B.x&&(y=y.derive({x:"d.x_off ? d.x / d.x_off : 0"}))):(y=y.rollup(G),L.x&&(y=y.groupby([...z,t.x.summary.variable].filter(e=>!!e)).derive(L)),O.y&&(y=y.groupby([...z,t.y.summary.variable].filter(e=>!!e)).derive(O))),W&&(y=y.groupby("country").derive({y:"d.y - mean(d.y)",x:"d.x - mean(d.x)"})),"map"===S.type){$&&(y=y.groupby(["country"]).rollup(E));let t={...S,geoIndex:k};t.name=p,t.id=e+u;let r=[];y.scan(e=>{r.push({name:y.get("country",e),value:y.get("y",e),year:$?"":y.get("year",e)})}),t.data=r,j.push(t)}else{let a=I.includes("year");$&&(delete E.year,y=y.groupby(I.filter(e=>"year"!==e)).rollup(E),a&&I.splice(I.indexOf("year"),1)),y=y.groupby(I.filter((e,t)=>!!t||"year"!==e)).select(["x","y",...I,a||$?"":"year"].filter(e=>""!==e)),a&&(y=y.orderby("year")),(y=y.reify()).columnNames().forEach((e,t)=>T[e]=t);let o=[];if(y.partitions().forEach(r=>{let a={...S,xAxisIndex:k,yAxisIndex:k};if(a.id=e+u,h){let e=y.get(h,r[0]);if(a.id+=e,"country"===h)if(e in n){let r=n[e];a.name=r[d[t.color_source]],a.color=r[w]||"#898989"}else a.name=e||p,a.color="#898989";else a.name=e,a.color=s[F[e]];if(x){a.name+=", "+y.get(x,r[0]);let e=y.get(x,r[0]),t=M[e];a.id+=e,a.symbol=t.symbol,a.lineStyle&&a.itemStyle&&(a.lineStyle.opacity=a.itemStyle.opacity=t.opacity)}else a.symbol="circle"}else a.name="series";if(a.name){let e=[];a.data=e,r.forEach(t=>{let r=Object.values(y.object(t));o.push([r[0],r[1]]),e.push(r)}),j.push(a)}}),_.push({label:p,top:0,height:0,left:0,width:0,yIndex:c,nYLevels:b,xIndex:r,nXLevels:v,nCountries:g}),"none"!==t.regression){let e=(0,i.regression)(t.regression,o,2);C.push({name:"fit",type:"line",color:"#898989",smooth:!0,showSymbol:!1,data:e.points,xAxisIndex:k,yAxisIndex:k,lineStyle:{width:1}})}}let V=y.ungroup().rollup({value:"[min(d.y), quantile(d.y, .97), max(d.y)]"}).array("value")[0];if(D.y[0]=Math.min(D.y[0],V[0]),D.y[1]=Math.max(D.y[1],V[1]),D.y[2]=Math.max(D.y[2],V[2]),t.as_plot){let e=y.ungroup().rollup({value:"[min(d.x), quantile(d.x, .97), max(d.x)]"}).array("value")[0];D.x[0]=Math.min(D.x[0],e[0]),D.x[1]=Math.max(D.x[1],e[1]),D.x[2]=Math.max(D.x[2],e[2])}})}),t.as_plot?{series:j,fits:C,panels:_,range:D,varIndices:T}:{series:j,range:D,varIndices:T}})(f,p,{panelX:W(p.x_panels,c.levels.demo_segments),panelY:W(p.y_panels,c.levels.demo_segments),color:W(p.color,c.levels.demo_segments),symbol:W(p.symbol,c.levels.demo_segments)},c.countryInfo),[p,f,c.levels.demo_segments,c.countryInfo]);return p.as_plot?(0,t.jsx)(E,{input:m,view:p,countryInfo:c.countryInfo,modeOverride:e}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O.Typography,{variant:"h6",sx:{position:"absolute",width:"100%",textAlign:"center"},children:p.y.name}),(0,t.jsx)(C.Box,{sx:{height:"100%",display:"flex",flexWrap:"wrap",pt:5,minWidth:500*m.range.panel[0]+"px",minHeight:300*m.range.panel[1]+"px"},children:(0,t.jsx)(R,{view:p,full:c,final:m,modeOverride:e})})]})}e.s(["DataDisplay",()=>N],98144)}]);