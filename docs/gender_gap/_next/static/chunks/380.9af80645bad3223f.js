"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[380],{37380:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var r=a(95155),n=a(9566),o=a(28627),s=a(12092),i=a(20809),l=a(53957),c=a(65710),d=a(53546),u=a(73816),f=a(64533),g=a(27960),m=a(41574),b=a(12115),y=a(65929),x=a(7575),h=a(96300),p=a(43213);function v(e){let{input:t,map:a,countryInfo:v,view:k,modeOverride:E}=e;(0,b.useEffect)(()=>{(0,n.Y)([i.a,l.a,c.a,d.a,u.a,s.a,x.a,f.a])},[]);let{mode:w}=(0,g.Ut)(),C=E||w,_=(0,b.useContext)(p.gM),z=(0,b.useRef)(null);return(0,b.useEffect)(()=>{let e=z.current?(0,o.Ts)(z.current,C,{renderer:"canvas"}):null;(0,y.ZB)("countries")||(0,y.mz)("countries",a);let t=()=>e&&e.resize();return window.addEventListener("resize",t),()=>{e&&e.dispose(),window.removeEventListener("resize",t)}},[C,a]),(0,b.useEffect)(()=>{if(z.current){let e=(0,o.FP)(z.current);if(e)if(t.series.length){let{series:a,range:r,varIndices:n}=t,o=k.y.summary.variable&&"-"===k.y.summary.adjust,s=Math.max(...r.y.map(e=>Math.abs(e))),i="dark"===C?{bg:"#121212",text:"#ffffff"}:{bg:"#ffffff",text:"#000000"},l=a[0].data&&a[0].data.length?a[0].data:[],c=a[0].data?a[0].data.length:0;e.setOption({backgroundColor:i.bg,title:{text:a[0].name,subtext:(1===c&&l[n.country]in v?"Data from ".concat(v[l[n.country]].name):"Observations from ".concat(c," ").concat(1===c?"country":"countries"))+(_&&_.sectors.length<5?", sector = "+_.sectors.join(", "):"")+(_&&1===_.sexes.length?", sex = "+_.sexes[0]:""),textStyle:{fontSize:"1em",fontWeight:"normal"},left:"center"},tooltip:{trigger:"item",textStyle:{color:i.text},backgroundColor:i.bg,borderWidth:0,formatter:e=>{let{marker:t,name:a,data:r}=e;return'<div class="tooltip-table">'+t+(a in v?v[a].name+" ("+a+")":"")+"<table><tr><td>Word Bank Region</td><td><strong>"+v[a].region+"</strong></td></tr><tr><td>"+k.y.name+(r&&"value"in r?", "+("mean"===k.time_agg||"all"===k.time_agg?"average":r.year)+(k.y.isGlobal?"":'<br><code class="variable-description">'.concat(k.y.description,"</code>"))+"</td><td><strong>"+(0,h.ZV)(r.value,k.y)+"</strong>":"</td><td><strong>unknown</strong>")+"</td></tr></table></div>"},position:h.Nt,appendToBody:!0},visualMap:{name:k.y.name,calculable:!0,min:o?-s:r.y[0],max:o?s:r.y[1],inRange:{color:["#7E1700","#C8E9B6","#1549A2"]}},series:a,toolbox:{feature:{saveAsImage:{}}}},!0,!0)}else e.clear()}},[t,C,v,k,_]),(0,r.jsx)(m.A,{ref:z,sx:{width:"100%",height:"100%",minHeight:"10px"}})}}}]);